<!DOCTYPE html>
<html lang="zh-CN">
<head>
   <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8039443538191558"
     crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Q50Q80EVB8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Q50Q80EVB8');
</script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>封面生成器</title>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@100;300;400;500;700;900&family=Noto+Serif+SC:wght@200;300;400;500;600;700;900&family=Ma+Shan+Zheng&family=ZCOOL+XiaoWei&family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Microsoft YaHei', sans-serif;
      background: #f8faff;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 30px;
      align-items: start;
    }

    @media (max-width: 1200px) {
      .container {
        grid-template-columns: 1fr;
        gap: 20px;
      }
    }

    .title {
      text-align: center;
      color: #05296E;
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 30px;
      text-shadow: 0 2px 4px rgba(255,255,255,0.8);
      grid-column: 1 / -1;
    }

    .controls-panel {
      background: white;
      border-radius: 18px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
      height: fit-content;
      max-height: 90vh;
      overflow-y: auto;
    }

    .canvas-panel {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 700px;
      position: sticky;
      top: 20px;
    }

    .control-group {
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid #f0f0f0;
      position: relative;
      padding-left: 18px;
    }

    .control-group::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      width: 4px;
      height: 100%;
      background: linear-gradient(180deg, #FFD100 0%, #FFDC40 100%);
      border-radius: 2px;
    }

    .control-group:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }

    .control-group h3 {
      color: #29467F;
      font-size: 1.15rem;
      margin-bottom: 15px;
      font-weight: 600;
    }

    .form-row {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 12px;
    }

    .form-row.inline {
      flex-direction: row;
      align-items: center;
      gap: 15px;
    }

    label {
      color: #555;
      font-weight: 500;
      font-size: 1rem;
    }

    input[type="file"] {
      padding: 12px;
      border: 2px dashed #ddd;
      border-radius: 10px;
      background: #fafafa;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    input[type="file"]:hover {
      border-color: #4575D4;
      background: #f0f6ff;
    }

    input[type="text"], input[type="number"], select {
      padding: 10px 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      background: white;
    }

    input[type="text"]:focus, input[type="number"]:focus, select:focus {
      outline: none;
      border-color: #1144AA;
      box-shadow: 0 0 0 3px rgba(17, 68, 170, 0.15);
    }

    input[type="color"] {
      width: 60px;
      height: 40px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      padding: 0;
      background: none;
      outline: none;
    }

    input[type="color"]:hover {
      border-color: #4575D4;
      box-shadow: 0 4px 12px rgba(69, 117, 212, 0.2);
      transform: translateY(-1px);
    }

    input[type="color"]:focus {
      border-color: #1144AA;
      box-shadow: 0 0 0 3px rgba(17, 68, 170, 0.15);
    }

    .color-control {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 10px 15px;
      background: #f8faff;
      border-radius: 10px;
      border: 1px solid #e8f0ff;
    }

    .color-control span {
      color: #29467F;
      font-weight: 500;
    }

    input[type="range"] {
      flex: 1;
      height: 6px;
      border-radius: 3px;
      background: #e0e0e0;
      outline: none;
      cursor: pointer;
    }

    input[type="range"]::-webkit-slider-thumb {
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #1144AA;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    input[type="range"]::-webkit-slider-thumb:hover {
      background: #05296E;
      transform: scale(1.1);
    }

    input[type="range"]::-moz-range-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #1144AA;
      cursor: pointer;
      border: none;
    }

    .buttons {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    button {
      flex: 1;
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .btn-primary {
      background: linear-gradient(135deg, #1144AA 0%, #29467F 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(17, 68, 170, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(17, 68, 170, 0.4);
      background: linear-gradient(135deg, #05296E 0%, #1144AA 100%);
    }

    .btn-secondary {
      background: linear-gradient(135deg, #FF6F00 0%, #BF6E30 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(255, 111, 0, 0.3);
    }

    .btn-secondary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 111, 0, 0.4);
      background: linear-gradient(135deg, #A64800 0%, #FF6F00 100%);
    }

    #coverCanvas {
      border: none;
      border-radius: 0;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      max-width: 700px;
      width: 100%;
      height: auto;
      background: white;
    }

    .canvas-placeholder {
      max-width: 700px;
      height: 450px;
      border: none;
      border-radius: 0px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #29467F;
      font-size: 1.2rem;
    }

    .size-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }

    .size-option {
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: white;
    }

    .size-option:hover {
      border-color: #4575D4;
      background: #f0f6ff;
    }

    .size-option.active {
      border-color: #1144AA;
      background: #1144AA;
      color: white;
    }

    .font-preview {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 12px;
      border-radius: 8px;
      transition: background 0.2s ease;
    }

    .font-preview:hover {
      background: #f0f6ff;
    }

    /* 字体预览样式 */
    #fontSelect option[value="Microsoft YaHei"] { font-family: "Microsoft YaHei"; }
    #fontSelect option[value="SimHei"] { font-family: "SimHei"; }
    #fontSelect option[value="SimSun"] { font-family: "SimSun"; }
    #fontSelect option[value="KaiTi"] { font-family: "KaiTi"; }
    #fontSelect option[value="FangSong"] { font-family: "FangSong"; }
    #fontSelect option[value="STKaiti"] { font-family: "STKaiti"; }
    #fontSelect option[value="STXingkai"] { font-family: "STXingkai"; }
    #fontSelect option[value="STSong"] { font-family: "STSong"; }
    #fontSelect option[value="STFangsong"] { font-family: "STFangsong"; }
    #fontSelect option[value="STHeiti"] { font-family: "STHeiti"; }
    #fontSelect option[value="LiSu"] { font-family: "LiSu"; }
    #fontSelect option[value="YouYuan"] { font-family: "YouYuan"; }
    #fontSelect option[value="Arial"] { font-family: "Arial"; }
    #fontSelect option[value="Arial Black"] { font-family: "Arial Black"; }
    #fontSelect option[value="Times New Roman"] { font-family: "Times New Roman"; }
    #fontSelect option[value="Georgia"] { font-family: "Georgia"; }
    #fontSelect option[value="Impact"] { font-family: "Impact"; }
    #fontSelect option[value="Trebuchet MS"] { font-family: "Trebuchet MS"; }
    #fontSelect option[value="Verdana"] { font-family: "Verdana"; }
    #fontSelect option[value="Helvetica"] { font-family: "Helvetica"; }
    #fontSelect option[value="Comic Sans MS"] { font-family: "Comic Sans MS"; }
    #fontSelect option[value="Courier New"] { font-family: "Courier New"; }
    #fontSelect option[value="Noto Sans SC"] { font-family: "Noto Sans SC"; }
    #fontSelect option[value="Noto Serif SC"] { font-family: "Noto Serif SC"; }
    #fontSelect option[value="Ma Shan Zheng"] { font-family: "Ma Shan Zheng"; }
    #fontSelect option[value="ZCOOL XiaoWei"] { font-family: "ZCOOL XiaoWei"; }
    #fontSelect option[value="ZCOOL KuaiLe"] { font-family: "ZCOOL KuaiLe"; }

    #removeImageBtn:hover {
      background: #ff3742 !important;
      transform: translateY(-1px);
    }

    @media (max-width: 768px) {
      .controls-panel {
        padding: 20px;
        order: 2;
      }
      
      .canvas-panel {
        padding: 20px;
        position: static;
        order: 1;
        min-height: 400px;
      }
      
      .buttons {
        flex-direction: column;
        gap: 10px;
      }
      
      .title {
        font-size: 2rem;
      }

      .control-group {
        padding-left: 15px;
        margin-bottom: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="title"><span style="color: #FFD100;">封面</span>生成器</h1>
    
    <div class="canvas-panel">
      <h3 style="margin-bottom: 90px; color: #333; font-size: 1.8rem; font-weight: 600;">预览效果</h3>

      <div id="canvasContainer">
        <div class="canvas-placeholder" id="placeholder">
          点击 "生成封面" 开始创作 
        </div>
        <canvas id="coverCanvas" style="display: none;"></canvas>
      </div>
      
    </div>

    <div class="controls-panel">
      <div class="control-group">
        <h3>📁 图片设置</h3>
        <div class="form-row">
          <label>上传背景图片</label>
          <input type="file" id="imageUpload" accept="image/*">
          <button type="button" id="removeImageBtn" style="display: none; margin-top: 10px; padding: 8px 16px; background: #ff4757; color: white; border: none; border-radius: 6px; font-size: 0.9rem; cursor: pointer; transition: all 0.3s ease;">
             删除图片
          </button>
        </div>
        <div class="form-row">
          <label>背景颜色</label>
          <div class="color-control">
            <input type="color" id="bgColor" value="#ffffff">
            <span>选择背景色</span>
          </div>
        </div>
      </div>

      <div class="control-group">
        <h3>✏️ 文字设置</h3>
        <div class="form-row">
          <label>封面标题</label>
          <input type="text" id="coverText" placeholder="输入你的封面标题...">
        </div>
        <div class="form-row">
          <label>字体选择</label>
          <select id="fontSelect" style="font-family: var(--selected-font, 'Microsoft YaHei');"
            <optgroup label="中文字体">
              <option value="Microsoft YaHei">微软雅黑 (推荐)</option>
              <option value="SimHei">黑体</option>
              <option value="SimSun">宋体</option>
              <option value="KaiTi">楷体</option>
              <option value="FangSong">仿宋</option>
              <option value="STKaiti">华文楷体</option>
              <option value="STXingkai">华文行楷</option>
              <option value="STSong">华文宋体</option>
              <option value="STFangsong">华文仿宋</option>
              <option value="STHeiti">华文黑体</option>
              <option value="LiSu">隶书</option>
              <option value="YouYuan">幼圆</option>
            </optgroup>
            <optgroup label="英文字体">
              <option value="Arial">Arial</option>
              <option value="Arial Black">Arial Black</option>
              <option value="Times New Roman">Times New Roman</option>
              <option value="Georgia">Georgia</option>
              <option value="Impact">Impact</option>
              <option value="Trebuchet MS">Trebuchet MS</option>
              <option value="Verdana">Verdana</option>
              <option value="Helvetica">Helvetica</option>
              <option value="Comic Sans MS">Comic Sans MS</option>
              <option value="Courier New">Courier New</option>
            </optgroup>
            <optgroup label="Web字体">
              <option value="Noto Sans SC">思源黑体</option>
              <option value="Noto Serif SC">思源宋体</option>
              <option value="Ma Shan Zheng">马善政毛笔体</option>
              <option value="ZCOOL XiaoWei">站酷小薇体</option>
              <option value="ZCOOL KuaiLe">站酷快乐体</option>
            </optgroup>
          </select>
        </div>
        <div class="form-row inline">
          <label>字体大小</label>
          <input type="number" id="fontSize" value="60" min="10" max="200">
          <span>px</span>
        </div>
        <div class="form-row">
          <label>文字颜色</label>
          <div class="color-control">
            <input type="color" id="textColor" value="#000000">
            <span>选择文字颜色</span>
          </div>
        </div>
        <div class="form-row">
          <label>文字特效</label>
          <select id="textEffect">
            <option value="none">无特效</option>
            <option value="shadow">阴影效果</option>
            <option value="stroke">描边效果</option>
            <option value="glow">发光效果</option>
            <option value="double-shadow">双重阴影</option>
            <option value="3d">3D立体效果</option>
          </select>
        </div>
        <div class="form-row" id="effectColorRow" style="display: none;">
          <label>特效颜色</label>
          <div class="color-control">
            <input type="color" id="effectColor" value="#666666">
            <span>选择特效颜色</span>
          </div>
        </div>
        <div class="form-row inline" id="effectIntensityRow" style="display: none;">
          <label>特效强度</label>
          <input type="range" id="effectIntensity" min="1" max="10" value="5">
          <span id="intensityValue">5</span>
        </div>
      </div>

      <div class="control-group">
        <h3>📐 尺寸设置</h3>
        <div class="form-row">
          <label>选择封面尺寸</label>
          <select id="sizeSelect">
            <option value="900x383">公众号封面 (900×383)</option>
            <option value="1500x600">Notion 封面 (1500×600)</option>
            <option value="1080x1080">正方形 (1080×1080)</option>
            <option value="1920x1080">视频封面 (1920×1080)</option>
            <option value="1080x1920">手机封面 (1080×1920)</option>
            <option value="custom">自定义尺寸</option>
          </select>
        </div>
        <div id="customSizeRow" style="display: none;">
          <div class="form-row inline">
            <label>宽度</label>
            <input type="number" id="customWidth" value="1200" min="100" max="4000">
            <span>px</span>
          </div>
          <div class="form-row inline">
            <label>高度</label>
            <input type="number" id="customHeight" value="800" min="100" max="4000">
            <span>px</span>
          </div>
        </div>
      </div>

      <div class="buttons">
        <button class="btn-primary" onclick="generateCover()">🎨 生成封面</button>
        <button class="btn-secondary" onclick="downloadCover()">💾 下载封面</button>
      </div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('coverCanvas');
    const ctx = canvas.getContext('2d');
    const placeholder = document.getElementById('placeholder');
    let uploadedImg = null;

    document.getElementById('imageUpload').addEventListener('change', function(e) {
      if (e.target.files[0]) {
        const reader = new FileReader();
        reader.onload = function(event) {
          uploadedImg = new Image();
          uploadedImg.onload = () => {
            document.getElementById('removeImageBtn').style.display = 'block';
            generateCover();
          };
          uploadedImg.src = event.target.result;
        };
        reader.readAsDataURL(e.target.files[0]);
      }
    });

    // 删除图片功能
    document.getElementById('removeImageBtn').addEventListener('click', function() {
      uploadedImg = null;
      document.getElementById('imageUpload').value = '';
      document.getElementById('removeImageBtn').style.display = 'none';
      
      // 如果当前已经生成了封面，重新生成不带图片的版本
      if (canvas.style.display === 'block') {
        generateCover();
      }
    });

    // 文字特效控制
    document.getElementById('textEffect').addEventListener('change', function() {
      const effect = this.value;
      const colorRow = document.getElementById('effectColorRow');
      const intensityRow = document.getElementById('effectIntensityRow');
      
      if (effect === 'none') {
        colorRow.style.display = 'none';
        intensityRow.style.display = 'none';
      } else {
        colorRow.style.display = 'block';
        intensityRow.style.display = 'flex';
      }
      
      if (canvas.style.display === 'block') {
        generateCover();
      }
    });

    // 特效强度滑块
    document.getElementById('effectIntensity').addEventListener('input', function() {
      document.getElementById('intensityValue').textContent = this.value;
      if (canvas.style.display === 'block') {
        generateCover();
      }
    });

    // 尺寸选择控制
    document.getElementById('sizeSelect').addEventListener('change', function() {
      const customSizeRow = document.getElementById('customSizeRow');
      if (this.value === 'custom') {
        customSizeRow.style.display = 'block';
      } else {
        customSizeRow.style.display = 'none';
      }
      
      if (canvas.style.display === 'block') {
        generateCover();
      }
    });

    // 自定义尺寸输入框事件
    ['customWidth', 'customHeight'].forEach(id => {
      document.getElementById(id).addEventListener('input', () => {
        if (canvas.style.display === 'block' && document.getElementById('sizeSelect').value === 'custom') {
          generateCover();
        }
      });
    });

    // 字体选择器样式更新
    document.getElementById('fontSelect').addEventListener('change', function() {
      const selectedFont = this.value;
      this.style.fontFamily = selectedFont;
    });

    function generateCover() {
      const bgColor = document.getElementById('bgColor').value;
      const text = document.getElementById('coverText').value;
      const font = document.getElementById('fontSelect').value;
      const textColor = document.getElementById('textColor').value;
      const sizeValue = document.getElementById('sizeSelect').value;
      
      let width, height;
      if (sizeValue === 'custom') {
        width = parseInt(document.getElementById('customWidth').value) || 1200;
        height = parseInt(document.getElementById('customHeight').value) || 800;
      } else {
        const size = sizeValue.split('x');
        width = parseInt(size[0]);
        height = parseInt(size[1]);
      }

      canvas.width = width;
      canvas.height = height;

      // 显示画布，隐藏占位符
      placeholder.style.display = 'none';
      canvas.style.display = 'block';

      // 背景填充
      ctx.fillStyle = bgColor;
      ctx.fillRect(0, 0, width, height);

      // 插入图像（居中）
      if (uploadedImg) {
        const scale = Math.min(width / uploadedImg.width, height / uploadedImg.height);
        const imgW = uploadedImg.width * scale;
        const imgH = uploadedImg.height * scale;
        const imgX = (width - imgW) / 2;
        const imgY = (height - imgH) / 2;
        ctx.drawImage(uploadedImg, imgX, imgY, imgW, imgH);
      }

      // 绘制文字（居中对齐）
      if (text.trim()) {
        const fontSize = parseInt(document.getElementById('fontSize').value);
        const textEffect = document.getElementById('textEffect').value;
        const effectColor = document.getElementById('effectColor').value;
        const intensity = parseInt(document.getElementById('effectIntensity').value);
        
        ctx.font = `${fontSize}px ${font}`;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        
        const textX = width / 2;
        const textY = height / 2;
        
        // 应用文字特效
        applyTextEffect(ctx, text, textX, textY, textColor, textEffect, effectColor, intensity, fontSize);
      }
    }

    function applyTextEffect(ctx, text, x, y, textColor, effect, effectColor, intensity, fontSize) {
      // 重置所有效果
      ctx.shadowColor = 'transparent';
      ctx.shadowBlur = 0;
      ctx.shadowOffsetX = 0;
      ctx.shadowOffsetY = 0;
      ctx.strokeStyle = 'transparent';
      ctx.lineWidth = 0;
      
      switch(effect) {
        case 'none':
          ctx.fillStyle = textColor;
          ctx.fillText(text, x, y);
          break;
          
        case 'shadow':
          // 阴影效果
          ctx.shadowColor = effectColor;
          ctx.shadowBlur = intensity * 2;
          ctx.shadowOffsetX = intensity;
          ctx.shadowOffsetY = intensity;
          ctx.fillStyle = textColor;
          ctx.fillText(text, x, y);
          break;
          
        case 'stroke':
          // 描边效果
          ctx.lineWidth = intensity;
          ctx.strokeStyle = effectColor;
          ctx.fillStyle = textColor;
          ctx.strokeText(text, x, y);
          ctx.fillText(text, x, y);
          break;
          
        case 'glow':
          // 发光效果
          ctx.shadowColor = effectColor;
          ctx.shadowBlur = intensity * 3;
          ctx.fillStyle = textColor;
          ctx.fillText(text, x, y);
          ctx.fillText(text, x, y); // 再次绘制增强发光
          break;
          
        case 'double-shadow':
          // 双重阴影
          ctx.shadowColor = effectColor;
          ctx.shadowBlur = intensity;
          ctx.shadowOffsetX = intensity;
          ctx.shadowOffsetY = intensity;
          ctx.fillStyle = textColor;
          ctx.fillText(text, x, y);
          
          // 第二层阴影
          ctx.shadowColor = 'rgba(0,0,0,0.3)';
          ctx.shadowBlur = intensity * 2;
          ctx.shadowOffsetX = intensity * 2;
          ctx.shadowOffsetY = intensity * 2;
          ctx.fillText(text, x, y);
          break;
          
        case '3d':
          // 3D立体效果
          for (let i = intensity; i > 0; i--) {
            ctx.fillStyle = effectColor;
            ctx.fillText(text, x + i, y + i);
          }
          ctx.fillStyle = textColor;
          ctx.fillText(text, x, y);
          break;
          
        default:
          ctx.fillStyle = textColor;
          ctx.fillText(text, x, y);
      }
      
      // 重置效果
      ctx.shadowColor = 'transparent';
      ctx.shadowBlur = 0;
      ctx.shadowOffsetX = 0;
      ctx.shadowOffsetY = 0;
    }

    function downloadCover() {
      if (canvas.width === 0 || canvas.height === 0 || canvas.style.display === 'none') {
        alert("请先点击 '生成封面' 按钮生成内容后再下载。");
        return;
      }
      const link = document.createElement('a');
      const timestamp = new Date().toISOString().slice(0, 19).replace(/[:-]/g, '');
      link.download = `封面_${timestamp}.png`;
      link.href = canvas.toDataURL('image/png');
      link.click();
    }

    // 实时预览功能
    ['coverText', 'fontSize', 'textColor', 'bgColor', 'effectColor'].forEach(id => {
      document.getElementById(id).addEventListener('input', () => {
        if (canvas.style.display === 'block') {
          generateCover();
        }
      });
    });

    ['fontSelect', 'textEffect'].forEach(id => {
      document.getElementById(id).addEventListener('change', () => {
        if (canvas.style.display === 'block') {
          generateCover();
        }
      });
    });
  </script>
</body>
</html>
